{% extends 'base/base.html' %}
{% load static %}

{% block head %}
  <link rel="stylesheet" href="{% static 'accommodation/accommodation_reviewdetail.css' %}">
{% endblock %}

{% block content %}
<div class="accommodation-detail-container">
    <div class="detail-header">
        <h2>다음 여행자를 위한 작은 안내서, <span class="header-strong">숙소 후기</span></h2>
        <p> > 상세 정보</p>
    </div>
    <div class="image-map">
        {% if review.photo %}
            <img src="{{ review.photo.url }}" alt="Accommodation Image" class="accommodation-image">
        {% else %}
            <img src="{% static 'img/room_ex1.png' %}" alt="Accommodation Image" class="accommodation-image">
        {% endif %}
        <img src="{% static 'img/Map_ex.png' %}" alt="" class="map-image">
    </div>
    <div class="detail-info">
        <div class="detail-info-header">
            <div class="detail-info-title">{{ review.city }} {{ review.accommodation_name }}</div>
            <span class="rating">⭐ {{ average_rating }}</span> 
            <button>
                <img src="{% static 'img/heart_icon.png' %}" alt="Favorite" class="favorite-icon">
            </button>
        </div>
        <div class="search-container">
            <p class="review-count">{{ review_count }}개의 리뷰</p>
            <button>
                <img src="{% static 'img/search-icon.svg' %}" alt="찾기" class="search-icon">
            </button>
        </div>

        <div class="reviews">
            {% for review_item in all_reviews %}
            <div class="review">
                <div class="review-header">
                    <span class="review-profileimg">
                        <img src="{% static 'img/default-profile.png' %}" alt="">
                    </span>
                    <span class="review-author">{{ review_item.user.nickname }}</span>
                    <span class="review-rating">⭐ {{ review_item.rating }}</span>
                    <button class="review-heart">
                        <img src="{% static 'img/heart_icon.png' %}" alt="Favorite" class="favorite-icon">
                    </button>
                </div>
                <div class="review-content">
                    <p class="review-text">{{ review_item.content }}</p>
                    {% if review_item.photo %}
                    <div class="review-image">
                        <img src="{{ review_item.photo.url }}" alt="Review Image">
                    </div>
                    {% endif %}
                </div>
                <button class="reply-button">댓글 달기 ></button>
            </div>
            {% endfor %}
        </div>
        
        <div class="action-buttons">
            <button class="navigate-button" onclick="location.href='{% url 'accommodation:accommodation_location' %}'">숙소 페이지로 ></button>
            <button class="write-review-button" onclick="location.href='{% url 'accommodation:accommodation_review_create' review.pk %}'">후기 작성하기 ></button>
        </div>
    </div>
</div>
{% endblock %}
